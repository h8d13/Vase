#!/bin/sh
#... strucs
# This file is an absolute mess but everything is declared here
################## VM STUFF
# QEMU Display Settings
# Display backend: gtk, sdl, vnc, spice
# GL acceleration: on, off
qemu_display="sdl"
qemu_gl="on"

arch="x86_64"
ram=8096
cores=8
size="60G" #preallocation doesnt take space directly
#iso_n="archlinux-x86_64"
iso_n="alpine-x86_64"
vm_name="myvm1" #anyname
#vm_name="myvm2" #alpine
#vm_name="myvm3" #arch
vm_ext="qcow2" #raw
iso_ext="iso" #raw, bin
## For running with attached storage
target_name="sde1"
target="/dev/${target_name}"
# This can also be a mount point /media/ ro smthn
################## VM STUFF END

################## DIRS/LOGS/PERMS
# Privilege escalation (ex: doas alternative)
elev_cmd="sudo"
# Dir mods
hide_d="."
ext_d=".d"
hide_d_mod=1  # 1=hidden, 0=visible
ext_d_mod=1 # 1=hidden, 0=visible
# Build custom_n with conditional prefix and suffix
custom_n="vase"
[ "$hide_d_mod" = "1" ] && custom_n="${hide_d}${custom_n}"
[ "$ext_d_mod" = "1" ] && custom_n="${custom_n}${ext_d}"
s_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
rel_c=""
## Where options options:
# ""      -> script's directory (default using dirname/pwd)
# ".."    -> one directory up from script
# "~"     -> user/root home directory
# "/usr/local/lib" -> absolute path
# "lib"   -> relative to script
p_lib="$custom_n"
c_file="logs"
c_ext="conf"
rcw_file="rcw"
log_n="vase"
log_ext="log"
cli_a="cli_art"
#### More paths
vase_d="vase_os"
hb_d="$vase_d/hade_box"
zl_d="$vase_d/zazulago_vms"

vase_p_env="$vase_d/env"

# Resolve the path based on config
case "$rel_c" in
    ""|".")
        rel="$s_dir/"
        ;;
    "~")
        rel="$HOME/"
        ;;
    "..")
        rel="$(dirname "$s_dir")/"
        ;;
    /*)
        # Absolute path
        rel="$rel_c/"
        ;;
    *)
        # Relative to script directory
        rel="$s_dir/$rel_c/"
        ;;
esac
## For runtime output
script_s=$(date +%s%6N)
